{% extends 'base.html' %}
{% block title %}
    Inventarisation List
{% endblock %}
{% block content %}
    <script>
        function doClick(id) {
            window.location.href = "/inventarisation/list/" + id + "/" + document.getElementById("pageNr" + id).value;
        }
    </script>
    <table class="table table-zebra">
        {% for inv in inventarisations %}
            <tr>
                <td>
                    <dl>
                        <dd><b>{{ inv.location.name }}{{ inv.location.category.name }}</b></dd>
                        <dd>{{ inv.date_time }}</dd>
                    </dl>
                </td>

                <script>
                    var input = document.getElementById("pageNr{{ inv.pk }}");

                    // Execute a function when the user releases a key on the keyboard
                    input.addEventListener("keyup", function (event) {
                        // Number 13 is the "Enter" key on the keyboard
                        if (event.keyCode === 13) {
                            // Cancel the default action, if needed
                            event.preventDefault();
                            // Trigger the button element with a click
                            doClick({{ inv.pk }})
                        }
                    });
                </script>
                <td class="join">
                    {% if inv.is_active %}
                        <a href="{% url 'inventarisation.print' inv.pk %}" class="btn btn-sm join-item">Print
                            List</a>
                        <input type="text" class="input input-bordered input-sm join-item" placeholder="Number"
                               style="width:120px"
                               aria-label="Page Number" aria-describedby="basic-addon2" id="pageNr{{ inv.pk }}">
                        <button class="btn btn-outline-secondary  btn-sm join-item" onclick="doClick({{ inv.pk }})"
                                type="button">To
                            page
                        </button>
                        <a href="{% url 'inventarisation.next' inv.pk -1 %}" class="btn-primary btn btn-sm  join-item">Next
                            Page</a>
                    {% else %}
                        <i>
                            <div style="align-content: center">Already finished, start new count</div>
                        </i>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
    <hr>
    <a href="{% url 'inventarisation.new' %}" class="btn-primary btn">New</a>

{% endblock %}